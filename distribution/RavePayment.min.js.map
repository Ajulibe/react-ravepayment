{"version":3,"sources":["../src/RavePayment.js"],"names":[],"mappings":"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","file":"RavePayment.min.js","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass RavePayment extends Component {\n  constructor(props) {\n    super(props);\n    this.payWithRave = this.payWithRave.bind(this);\n    this.loadScript = this.loadScript.bind(this);\n    this.state = {\n      scriptLoaded: null,\n      text: this.props.text || \"Make Payment\",\n      class: this.props.class || \"\",\n      currency: this.props.currency || \"NGN\",\n      country: this.props.country || \"NG\"\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      scriptLoaded: new Promise(resolve => {\n        this.loadScript(() => {\n          resolve();\n        });\n      })\n    });\n  }\n\n  loadScript(callback) {\n    const script = document.createElement(\"script\");\n    script.src = !this.props.isProduction\n      ? \"https://ravesandboxapi.flutterwave.com/flwv3-pug/getpaidx/api/flwpbf-inline.js\"\n      : \"https://api.ravepay.co/flwv3-pug/getpaidx/api/flwpbf-inline.js\";\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n    if (script.readyState) {\n      // IE\n      script.onreadystatechange = () => {\n        if (\n          script.readyState === \"loaded\" ||\n          script.readyState === \"complete\"\n        ) {\n          script.onreadystatechange = null;\n          callback();\n        }\n      };\n    } else {\n      // Others\n      script.onload = () => {\n        callback();\n      };\n    }\n  }\n\n  payWithRave() {\n    this.state.scriptLoaded &&\n      this.state.scriptLoaded.then(() => {\n        window.getpaidSetup({\n          customer_email: this.props.email,\n          amount: this.props.amount,\n          txref: this.props.reference,\n          PBFPubKey: this.props.ravePubKey,\n          onclose: () => this.props.close(),\n          callback: response => this.props.callback(response),\n          meta: this.props.metadata || [{}],\n          currency: this.state.currency,\n          country: this.state.country,\n          customer_firstname: this.props.customer_firstname || \"\",\n          customer_phone: this.props.customer_phone || \"\",\n          customer_lastname: this.props.customer_lastname || \"\",\n          custom_title: this.props.custom_title || \"\",\n          custom_description: this.props.custom_description || \"\",\n          custom_logo: tthis.props.custom_logo || \"\",\n          subaccounts: this.props.subaccounts || [{}], //splits payments into subaccounts provided\n          payment_method: this.props.payment_method || \"both\", //falls back to card and account if none is specified\n          payment_plan: this.props.payment_plan || \"\", //the id of your payment plan\n          redirect_url: this.props.redirect_url || \"\", //calls this url after successful payment\n          hosted_payment: this.props.hosted_payment, //opens the modal in a new page\n          campaign_id: this.props.campaign_id || \"\" //allows discounts\n        });\n      });\n  }\n\n  render() {\n    const CustomTag = `${this.props.tag}`;\n\n    return (\n      <Fragment>\n        <CustomTag className={this.state.class} onClick={this.payWithRave}>\n          {this.state.text}\n        </CustomTag>\n      </Fragment>\n    );\n  }\n}\n\nRavePayment.defaultProps = {\n  isProduction: false,\n  tag: \"button\"\n};\n\nRavePayment.propTypes = {\n  isProduction: PropTypes.bool,\n  text: PropTypes.string,\n  class: PropTypes.string,\n  metadata: PropTypes.array,\n  currency: PropTypes.string,\n  country: PropTypes.string,\n  customer_firstname: PropTypes.string,\n  customer_lastname: PropTypes.string,\n  customer_phone: PropTypes.string,\n  custom_title: PropTypes.string,\n  custom_description: PropTypes.string,\n  custom_logo: PropTypes.string,\n  reference: PropTypes.string.isRequired,\n  email: PropTypes.string.isRequired,\n  amount: PropTypes.number.isRequired, //in Naira\n  ravePubKey: PropTypes.string.isRequired,\n  callback: PropTypes.func.isRequired,\n  close: PropTypes.func.isRequired,\n  subaccounts: PropTypes.array,\n  payment_method: PropTypes.string,\n  payment_plan: PropTypes.number,\n  redirect_url: PropTypes.string,\n  hosted_payment: PropTypes.number,\n  campaign_id: PropTypes.number,\n  tag: PropTypes.oneOf([\"button\", \"a\", \"input\"])\n};\n\nexport default RavePayment;\n"]}